webpackJsonp([1],{"0id1":function(t,e){},AUV6:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n={name:"Loader",props:["active"],data:function(){return{baseIncrement:0,value:0,maxValue:0,runId:-1,running:!1,timing:125}},created:function(){this.active&&this.$nextTick(this.run)},watch:{active:function(t,e){t?(e&&this.stop(),this.run()):this.stop()}},methods:{run:function(){var t=this;this.value=1,this.running=!0,this.maxValue=this.$refs.loader.clientWidth,this.baseIncrement=.07*this.maxValue,console.log(this.maxValue),this.runId=setInterval(function(){t.value+=t.baseIncrement-t.baseIncrement*(t.value/t.maxValue)},this.timing)},stop:function(){var t=this;this.value=this.maxValue,setTimeout(function(){return t.running=!1},250),clearInterval(this.runId)}},computed:{loader:function(){return{width:this.value+"px"}}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{ref:"loader",staticClass:"hiq-loader"},[e("transition",{attrs:{name:"bar-fade"}},[this.running?e("span",{staticClass:"bar",style:this.loader}):this._e()])],1)},staticRenderFns:[]};var r=i("VU/8")(n,s,!1,function(t){i("AUV6")},null,null).exports,o={name:"App",components:{Loader:r},computed:{}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"main",mode:"out-in"}},[e("router-view")],1)},staticRenderFns:[]};var l=i("VU/8")(o,u,!1,function(t){i("XWVx")},null,null).exports,c=i("/ocq"),d=i("Gu7T"),h=i.n(d),m=i("//Fk"),f=i.n(m),v=i("Dd8w"),p=i.n(v),g=i("fZjL"),b=i.n(g),q={created:function(){"undefined"!=typeof document&&C(this,function(t,e){var i,a,n,s;i=document,a=t,n=e,s=y?{passive:!1}:void 0,i.addEventListener(a,n,s)})},beforeDestroy:function(){"undefined"!=typeof document&&C(this,function(t,e){var i,a,n,s;i=document,a=t,n=e,s=y?{passive:!1}:void 0,i.removeEventListener(a,n,s)})}},y="undefined"!=typeof window&&function(){var t=!1;try{var e={get:function(){t=!0}},i=Object.defineProperty({},"passive",e);window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(e){t=!1}return t}();function C(t,e){var i=t.$options.events;b()(i).forEach(function(a){e(a,function(e){return i[a].call(t,e)})})}function N(t,e){var i=e.getBoundingClientRect();return{left:t.clientX-i.left,top:t.clientY-i.top}}var w={mixins:[q],props:{disabled:Boolean},data:function(){return{isDrag:!1}},events:{mousedown:function(t){return this.dragStart(t,this.offsetByMouse)},mousemove:function(t){return this.dragMove(t,this.offsetByMouse)},mouseup:function(t){return this.dragEnd(t,this.offsetByMouse)},touchstart:function(t){return this.dragStart(t,this.offsetByTouch)},touchmove:function(t){return this.dragMove(t,this.offsetByTouch)},touchend:function(t){return this.dragEnd(t,this.offsetByTouch)},touchcancel:function(t){return this.dragEnd(t,this.offsetByTouch)}},methods:{isInTarget:function(t){return!!t&&(t===this.$el||this.isInTarget(t.parentElement))},offsetByMouse:function(t){return N(t,this.$el)},offsetByTouch:function(t){return N(0===t.touches.length?t.changedTouches[0]:t.touches[0],this.$el)},dragStart:function(t,e){this.disabled||void 0!==t.button&&0!==t.button||!this.isInTarget(t.target)||(t.preventDefault(),this.isDrag=!0,this.$emit("dragstart",t,e(t),this.$el))},dragMove:function(t,e){this.isDrag&&(t.preventDefault(),this.$emit("drag",t,e(t),this.$el))},dragEnd:function(t,e){this.isDrag&&(t.preventDefault(),this.isDrag=!1,this.$emit("dragend",t,e(t),this.$el))}},render:function(){return this.$slots.default&&this.$slots.default[0]}},V={name:"RangeSlider",props:{name:String,value:[String,Number],disabled:{type:Boolean,default:!1},min:{type:[String,Number],default:0},max:{type:[String,Number],default:100},step:{type:[String,Number],default:1}},data:function(){return{actualValue:null,dragStartValue:null,draging:!1}},created:function(){var t=this._min,e=this._max,i=Number(this.value);(null==this.value||isNaN(i))&&(i=t>e?t:(t+e)/2),this.actualValue=this.round(i)},computed:{_min:function(){return Number(this.min)},_max:function(){return Number(this.max)},_step:function(){return Number(this.step)},valuePercent:function(){return(this.actualValue-this._min)/(this._max-this._min)*100}},watch:{value:function(t){var e=Number(t);null==t||isNaN(e)||(this.actualValue=this.round(e))},min:function(){this.actualValue=this.round(this.actualValue)},max:function(){this.actualValue=this.round(this.actualValue)}},methods:{dragStart:function(t,e){this.draging=!0,this.dragStartValue=this.actualValue,t.target!==this.$refs.knob&&this.drag(t,e)},drag:function(t,e){var i=this.$refs.inner.offsetWidth;this.actualValue=this.round(this.valueFromBounds(e.left,i)),this.emitInput(this.actualValue)},dragEnd:function(t,e){var i=this.$refs.inner.offsetWidth;this.draging=!1,this.actualValue=this.round(this.valueFromBounds(e.left,i)),this.dragStartValue!==this.actualValue&&this.emitChange(this.actualValue)},emitInput:function(t){this.$emit("input",t)},emitChange:function(t){this.$emit("change",t)},valueFromBounds:function(t,e){return t/e*(this._max-this._min)+this._min},round:function(t){return function(t,e,i,a){if(t<=e)return e;var n=Math.floor((i-e)/a)*a+e;if(t>=n)return n;var s=(t-e)/a,r=Math.floor(s),o=s-r;return 0===o?t:o<.5?a*r+e:a*(r+1)+e}(t,this._min,this._max,this._step)}},components:{DragHelper:w}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"range-slider",class:{disabled:t.disabled}},[i("drag-helper",{attrs:{disabled:t.disabled},on:{dragstart:t.dragStart,drag:t.drag,dragend:t.dragEnd}},[i("span",{ref:"inner",staticClass:"range-slider-inner"},[i("input",{staticClass:"range-slider-hidden",attrs:{type:"text",name:t.name,disabled:t.disabled},domProps:{value:t.actualValue}}),t._v(" "),i("span",{staticClass:"range-slider-rail"}),t._v(" "),i("span",{staticClass:"range-slider-fill",style:{width:t.valuePercent+"%"}}),t._v(" "),i("span",{ref:"knob",staticClass:"range-slider-knob",class:{draging:t.draging},style:{left:t.valuePercent+"%"},attrs:{"data-value":t.actualValue}},[t._t("knob")],2)])])],1)},staticRenderFns:[]};var k={name:"JobQuestion",props:["question"],created:function(){switch(this.question.attributes["question-type"]){case"Choice":this.question.valueName="choices",this.question.value=[];break;case"Range":this.question.valueName="range";break;case"Boolean":this.question.valueName="boolean";break;case"Text":this.question.valueName="text"}},watch:{question:{handler:function(t){this.question.isDirty=this.question.isDirty||t.value.length>0||"boolean"==typeof t.value,this.question.isValid="number"==typeof t.value?t.value>-1:"boolean"==typeof t.value?t.valueName||!0:t.value.length>0},deep:!0}},components:{RangeSlider:i("VU/8")(V,x,!1,function(t){i("0id1")},null,null).exports}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-wrapper m-b:1"},["Text"===t.question.attributes["question-type"]&&t.question.attributes["single-line"]?i("div",{staticClass:"input-field"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.question.value,expression:"question.value"}],staticClass:"hiq-style",class:{invalid:t.question.isDirty&&!t.question.isValid},attrs:{type:"text",placeholder:t.question.attributes.title},domProps:{value:t.question.value},on:{input:function(e){e.target.composing||t.$set(t.question,"value",e.target.value)}}})]):"Text"!==t.question.attributes["question-type"]||t.question.attributes["single-line"]?"Boolean"===t.question.attributes["question-type"]?i("fieldset",{staticClass:"input-field grid-x"},[i("legend",{staticClass:"c:white small-12 cell"},[t._v(t._s(t.question.attributes.title))]),t._v(" "),i("label",{staticClass:"shrink cell grid-x",attrs:{for:t.question.id+"true"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.question.value,expression:"question.value"}],staticClass:"hiq-style show-for-sr",class:{invalid:t.question.isDirty&&!t.question.isValid},attrs:{id:t.question.id+"true",value:"true",type:"radio"},domProps:{checked:t._q(t.question.value,"true")},on:{change:function(e){t.$set(t.question,"value","true")}}}),t._v(" "),i("span",{staticClass:"checkmark"}),t._v(" "),i("span",{staticClass:"name m-l:1"},[t._v("Ja")])]),t._v(" "),i("label",{staticClass:"shrink cell grid-x m-l:2",attrs:{for:t.question.id+"false"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.question.value,expression:"question.value"}],staticClass:"hiq-style show-for-sr",class:{invalid:t.question.isDirty&&!t.question.isValid},attrs:{id:t.question.id+"false",value:"false",type:"radio"},domProps:{checked:t._q(t.question.value,"false")},on:{change:function(e){t.$set(t.question,"value","false")}}}),t._v(" "),i("span",{staticClass:"checkmark"}),t._v(" "),i("span",{staticClass:"name m-l:1"},[t._v("Nej")])])]):"Range"===t.question.attributes["question-type"]?i("div",{staticClass:"input-field"},[i("label",{staticClass:"c:white"},[t._v(t._s(t.question.attributes.title))]),t._v(" "),i("RangeSlider",{staticClass:"hiq-style",class:{invalid:t.question.isDirty&&!t.question.isValid},attrs:{min:t.question.attributes["start-with"],max:t.question.attributes["end-with"]},model:{value:t.question.value,callback:function(e){t.$set(t.question,"value",e)},expression:"question.value"}})],1):"Choice"===t.question.attributes["question-type"]?i("div",{staticClass:"input-field"},[i("label",{staticClass:"c:white",attrs:{for:t.question.id}},[t._v(t._s(t.question.attributes.title))]),t._v(" "),t.question.attributes.multiple?i("select",{directives:[{name:"model",rawName:"v-model",value:t.question.value,expression:"question.value"}],staticClass:"hiq-style",class:{invalid:t.question.isDirty&&!t.question.isValid},attrs:{id:t.question.id,multiple:""},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.question,"value",e.target.multiple?i:i[0])}}},t._l(t.question.attributes.alternatives,function(e){return i("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.title))])})):i("fieldset",{staticClass:"grid-x"},t._l(t.question.attributes.alternatives,function(e){return i("label",{key:e.id,staticClass:"small-12 cell grid-x m-t:1",attrs:{for:e.id}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.question.value,expression:"question.value"}],staticClass:"hiq-style show-for-sr",class:{invalid:t.question.isDirty&&!t.question.isValid},attrs:{id:e.id,type:"radio"},domProps:{value:e.id,checked:t._q(t.question.value,e.id)},on:{change:function(i){t.$set(t.question,"value",e.id)}}}),t._v(" "),i("span",{staticClass:"checkmark"}),t._v(" "),i("span",{staticClass:"name m-l:1"},[t._v(t._s(e.title))])])}))]):i("div",{staticClass:"input-field"},[i("span",[t._v(t._s(t.question.attributes["question-type"]))])]):i("div",{staticClass:"input-field"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.question.value,expression:"question.value"}],staticClass:"hiq-style",class:{invalid:t.question.isDirty&&!t.question.isValid},attrs:{cols:"30",rows:"10",placeholder:t.question.attributes.title},domProps:{value:t.question.value},on:{input:function(e){e.target.composing||t.$set(t.question,"value",e.target.value)}}})])])},staticRenderFns:[]};var D=i("VU/8")(k,$,!1,function(t){i("nweg")},null,null).exports,T=i("mvHQ"),j=i.n(T),E=i("M4fF"),S=i.n(E),L=i("nVVC"),P=i.n(L),B="https://api.teamtailor.com/v1",F=function(t){return function(e,i){var a={method:t,headers:{Authorization:"Token token=nCJ8xT3OvT5YHBOHk-OF6_9QTxry1mWgy_StA0PZ","X-Api-Version":20161108,"Content-Type":"application/vnd.api+json"}};return i&&(a=S.a.assign(a,{body:i})),fetch(e,a).then(function(t){return t.json()}).then(function(t){return new f.a(function(e,i){!t||t.errors?i(t):e(t.data||{})})})}};S.a.forOwnMap=function(t,e){var i=[];return this.forOwn(t,function(t,a){return i.push(e(a,t))}),i};var I=function(t,e){return t+"="+e},M=function(t,e){return I("filter["+t+"]",e)},A=function(t){return P.a.compose(function(e){return encodeURI(t+e)},P.a.join("&"),P.a.flatten)},R=F("GET"),J=F("POST"),O={list:function(t){t=t||{};var e=S.a.omit(t,["filters"]),i=t.filters,a=[];a.push(S.a.forOwnMap(e,I)),a.push(S.a.forOwnMap(i,M));var n=A(B+"/jobs?")(a);return R(n).then(function(t){return console.log(t),f.a.resolve(t)})},show:function(t){return R(B+"/jobs/"+t)}},U={list:function(t){t=t||{};var e=S.a.omit(t,["filters"]),i=t.filters,a=[];a.push(S.a.forOwnMap(e,I)),a.push(S.a.forOwnMap(i,M));var n=A(B+"/candidates?")(a);return R(n)},create:function(t,e,i){var a={data:{type:"candidates",attributes:{"first-name":t,"last-name":e,pitch:"",email:i}}};return J("https://api.teamtailor.com/v1/candidates",j()(a))},show:function(t){return R(B+"/candidates/"+t)}},H={create:function(t,e,i){var a={data:{type:"answers",attributes:t,relationships:{candidate:{data:{id:e,type:"candidates"}},question:{data:{id:i,type:"questions"}}}}};return J("https://api.teamtailor.com/v1/answers",j()(a))}},W={create:function(t,e){var i={data:{type:"job-applications",attributes:{},relationships:{candidate:{data:{id:t,type:"candidates"}},job:{data:{id:e,type:"jobs"}}}}};return J("https://api.teamtailor.com/v1/job-applications",j()(i))}},z=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,Q={name:"Job",props:["id"],data:function(){return{attributes:{},questions:[],firstName:{value:"",isDirty:!1,isValid:!1},lastName:{value:"",isDirty:!1,isValid:!1},email:{value:"",isDirty:!1,isValid:!1},isInitialized:!1,candidate:null,sending:!1,sent:!1}},created:function(){var t=this;this.$emit("loading",!0),O.show(this.id).then(function(e){return t.attributes=e.attributes,R(e.relationships.questions.links.related)}).then(function(e){t.questions=_.map(e,function(t){return p()({value:"",valueName:"",isValid:!1,isDirty:!1},t)}),t.$emit("loading",!1),t.isInitialized=!0}).catch(function(t){return console.error(t)})},methods:{send:function(){var t=this;this.isAllFieldsValid()?(this.sending=!0,U.list({include:["job-applications"],filters:{email:this.email.value}}).then(function(e){if(e.length>0){var i=e.find(function(e){return e.attributes["first-name"].toLocaleLowerCase()===t.firstName.value.toLocaleLowerCase()&&e.attributes["last-name"].toLocaleLowerCase()===t.lastName.value.toLocaleLowerCase()});if(i)return f.a.resolve(i)}return U.create(t.firstName.value,t.lastName.value,t.email.value)}).then(function(e){return t.candidate=e,R(e.relationships.answers.links.related)}).then(function(t){return f.a.all(t.map(function(t){return R(t.relationships.question.links.related)}))}).then(function(e){return f.a.all(t.questions.reduce(function(i,a){if(!e.find(function(t){return t.id===a.id})){var n={};n[a.valueName]=a.value,i.push(H.create(n,t.candidate.id,a.id))}return i},[]))}).then(function(e){W.create(t.candidate.id,t.id)}).then(function(e){console.log(e),t.sent=!0,t.sending=!1}).catch(function(e){console.error(e),t.sending=!1})):this.getAllFields().forEach(function(t){t.isDirty||(t.isDirty=!0)})},getAllFields:function(){return[].concat(h()(this.questions),[this.firstName,this.lastName,this.email])},isAllFieldsValid:function(){return!this.getAllFields().find(function(t){return!t.isValid})}},watch:{firstName:{handler:function(t){this.firstName.isDirty=this.firstName.isDirty||t.value.length>0,this.firstName.isValid=t.value.length>0},deep:!0},lastName:{handler:function(t){this.lastName.isDirty=this.lastName.isDirty||t.value.length>0,this.lastName.isValid=t.value.length>0},deep:!0},email:{handler:function(t){this.email.isDirty=this.email.isDirty||t.value.length>0,this.email.isValid=z.test(t.value.toLowerCase())},deep:!0}},components:{JobQuestion:D}},X={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"placehold",mode:"out-in"}},[t.isInitialized?i("main",{key:"form",staticClass:"grid-container"},[i("h1",[t._v(t._s(t.attributes.title))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.attributes.body)}}),t._v(" "),i("transition",{attrs:{name:"questions",mode:"out-in"}},[t.sent?i("div",{key:"sent"},[i("h2",[t._v("Tack "+t._s(t.firstName.value)+", för din ansökan!")])]):i("div",{key:"questions",staticClass:"questions",class:{sending:t.sending}},[t._l(t.questions,function(t){return i("JobQuestion",{key:t.key,attrs:{question:t}})}),t._v(" "),i("div",{staticClass:"candidate-inputs"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.firstName.value,expression:"firstName.value",modifiers:{trim:!0}}],staticClass:"hiq-style m-b:1",class:{invalid:t.firstName.isDirty&&!t.firstName.isValid},attrs:{type:"text",placeholder:"Förnamn"},domProps:{value:t.firstName.value},on:{input:function(e){e.target.composing||t.$set(t.firstName,"value",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lastName.value,expression:"lastName.value",modifiers:{trim:!0}}],staticClass:"hiq-style m-b:1",class:{invalid:t.lastName.isDirty&&!t.lastName.isValid},attrs:{type:"text",placeholder:"Efternamn"},domProps:{value:t.lastName.value},on:{input:function(e){e.target.composing||t.$set(t.lastName,"value",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email.value,expression:"email.value",modifiers:{trim:!0}}],staticClass:"hiq-style m-b:1",class:{invalid:t.email.isDirty&&!t.email.isValid},attrs:{type:"email",placeholder:"Email"},domProps:{value:t.email.value},on:{input:function(e){e.target.composing||t.$set(t.email,"value",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("button",{staticClass:"button-hiq",on:{click:t.send}},[t._v(t._s(t.attributes["apply-button-text"]||"Skicka"))])])],2)])],1):i("main",{key:"placeholder",staticClass:"loading-placeholder grid-container"},[i("span",{staticClass:"placeholder-text m-b:2"}),t._v(" "),i("span",{staticClass:"placeholder-input m-b:1"}),t._v(" "),i("span",{staticClass:"placeholder-textarea m-b:1"}),t._v(" "),i("span",{staticClass:"placeholder-input m-b:1"}),t._v(" "),i("span",{staticClass:"placeholder-input m-b:1"}),t._v(" "),i("span",{staticClass:"placeholder-input m-b:1"}),t._v(" "),i("span",{staticClass:"placeholder-button"})])])},staticRenderFns:[]};var G={name:"JobList",data:function(){return{jobs:[]}},created:function(){var t=this;this.$emit("loading",!0),O.list({include:["location","role"],pagesize:15}).then(function(e){t.jobs=_.map(e,function(t){var e={id:t.id,title:t.attributes.title,location:!1,role:!1};return R(t.relationships.location.links.related).then(function(t){return e.location=t}).catch(function(t){return console.error(t)}),e}),t.$emit("loading",!1)}).catch(function(t){return console.error(t)})},methods:{selectJob:function(t){this.$emit("selectJob",t)}},computed:{listJobs:function(){var t=function(t,e){return-1===t.title.localeCompare(e.title)?-1:1===t.title.localeCompare(e.title)?1:0};return this.jobs.reduce(function(e,i){var a=-1,n="",s="";i.location&&i.location.attributes&&(a=i.location.id,n=i.location.attributes.city,s=i.location.attributes.country);var r=e.find(function(t){return t.id===a});return r?(r.jobs.push(i),r.jobs.sort(t)):e.push({id:a,city:n,country:s,jobs:[i]}),e},[])}}},Y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main",{staticClass:"grid-container"},t._l(t.listJobs,function(e){return i("div",{key:e.id,staticClass:"c:white"},[i("h1",[t._v(t._s(e.city))]),t._v(" "),i("div",{staticClass:"grid-y"},t._l(e.jobs,function(e){return i("router-link",{key:e.id,staticClass:"button-hiq m-b:1",attrs:{to:{name:"job",params:{id:e.id}}}},[t._v(t._s(e.title))])}))])}))},staticRenderFns:[]},Z=[{path:"/job/:id",component:i("VU/8")(Q,X,!1,function(t){i("PSNo")},null,null).exports,name:"job",props:!0},{path:"/",component:i("VU/8")(G,Y,!1,null,null,null).exports}],K=new c.a({routes:Z});a.a.config.productionTip=!1,a.a.use(c.a);var tt=new a.a({el:"#app",data:{loading:!1},components:{App:l,Loader:r},template:'<div><App/><Loader :active="loading"/></div>',router:K});K.beforeEach(function(t,e,i){tt.loading=!0,console.log("Before"),i()}),K.afterEach(function(t,e){setTimeout(function(){return tt.loading=!1},250),console.log("After")})},PSNo:function(t,e){},XWVx:function(t,e){},nweg:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d2a7783b886b41dc1c80.js.map